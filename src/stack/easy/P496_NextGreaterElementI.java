package stack.easy;

import java.util.ArrayDeque;
import java.util.Deque;
import java.util.HashMap;
import java.util.Map;

/**
 * ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I
 * <a href="https://leetcode.cn/problems/next-greater-element-i/">ğŸ”—</a>
 *
 * nums1Â ä¸­æ•°å­—Â xÂ çš„ ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  æ˜¯æŒ‡Â xÂ åœ¨Â nums2 ä¸­å¯¹åº”ä½ç½® å³ä¾§ çš„ ç¬¬ä¸€ä¸ª æ¯”Â xÂ å¤§çš„å…ƒç´ ã€‚
 *
 * ç»™ä½ ä¸¤ä¸ª æ²¡æœ‰é‡å¤å…ƒç´  çš„æ•°ç»„Â nums1 å’ŒÂ nums2 ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹è®¡æ•°ï¼Œå…¶ä¸­nums1Â æ˜¯Â nums2Â çš„å­é›†ã€‚
 *
 * å¯¹äºæ¯ä¸ª 0 <= i < nums1.length ï¼Œæ‰¾å‡ºæ»¡è¶³ nums1[i] == nums2[j] çš„ä¸‹æ ‡ j ï¼Œå¹¶ä¸”åœ¨ nums2 ç¡®å®š nums2[j] çš„ ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œé‚£ä¹ˆæœ¬æ¬¡æŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ -1 ã€‚
 *
 * è¿”å›ä¸€ä¸ªé•¿åº¦ä¸ºÂ nums1.length çš„æ•°ç»„ ans ä½œä¸ºç­”æ¡ˆï¼Œæ»¡è¶³ ans[i] æ˜¯å¦‚ä¸Šæ‰€è¿°çš„ ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  ã€‚
 *
 * Â 
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 * è¾“å…¥ï¼šnums1 = [4,1,2], nums2 = [1,3,4,2].
 * è¾“å‡ºï¼š[-1,3,-1]
 * è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š
 * - 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
 * - 1 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚
 * - 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
 * ç¤ºä¾‹ 2ï¼š
 *
 * è¾“å…¥ï¼šnums1 = [2,4], nums2 = [1,2,3,4].
 * è¾“å‡ºï¼š[3,-1]
 * è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š
 * - 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚
 * - 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
 * Â 
 *
 * æç¤ºï¼š
 *
 * 1 <= nums1.length <= nums2.length <= 1000
 * 0 <= nums1[i], nums2[i] <= 104
 * nums1å’Œnums2ä¸­æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ
 * nums1 ä¸­çš„æ‰€æœ‰æ•´æ•°åŒæ ·å‡ºç°åœ¨ nums2 ä¸­
 * Â 
 *
 * è¿›é˜¶ï¼šä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(nums1.length + nums2.length) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ
 *
 * @author chengzhy
 * @date 2022/2/9 13:51
 */
public class P496_NextGreaterElementI {

    public int[] nextGreaterElement(int[] nums1, int[] nums2) {
        int[] ans = new int[nums1.length];
        // å•è°ƒæ ˆé¢˜ç›®
        Deque<Integer> stack = new ArrayDeque<>();
        // mapå­˜nums1ä¸­çš„æ•°åœ¨nums2ä¸­çš„ä½ç½®
        Map<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < nums1.length; i++) {
            map.put(nums1[i], i);
            // åˆå§‹åŒ–ç»“æœä¸º-1
            ans[i] = -1;
        }
        for (int i = 0; i < nums2.length; i++) {
            // å•è°ƒæ ˆ(ä»å¤§åˆ°å°å­˜æ•°æ®)ä¸ä¸ºç©ºå¹¶ä¸”å½“å‰æ•°å¤§äºæ ˆé¡¶å…ƒç´ ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ 
            while (!stack.isEmpty() && nums2[i] > stack.peek()) {
                int num = stack.pop();
                // å¯»æ‰¾mapï¼Œå¦‚æœnums1ä¸­æœ‰æ­¤æ•°ï¼Œæ›´æ–°ç»“æœé›†æ­¤æ•°å¯¹åº”çš„ä½ç½®ï¼Œå°†ç»“æœç½®ä¸ºç¬¬ä¸€ä¸ªæ¯”xå¤§çš„å…ƒç´ 
                if (map.containsKey(num)) {
                    ans[map.get(num)] = nums2[i];
                }
            }
            // ç”±äºæ­¤é¢˜ç»“æœéœ€è¦çš„æ˜¯å€¼è€Œä¸æ˜¯ä½ç½®ï¼Œæ‰€ä»¥å•è°ƒæ ˆå­˜å€¼
            stack.push(nums2[i]);
        }
        return ans;
    }

}
