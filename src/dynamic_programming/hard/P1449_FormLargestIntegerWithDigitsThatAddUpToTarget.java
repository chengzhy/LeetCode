package dynamic_programming.hard;

import java.util.Arrays;

/**
 * æ•°ä½æˆæœ¬å’Œä¸ºç›®æ ‡å€¼çš„æœ€å¤§æ•°å­—
 * <a href="https://leetcode-cn.com/problems/form-largest-integer-with-digits-that-add-up-to-target/">ğŸ”—</a>
 *
 * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â costÂ å’Œä¸€ä¸ªæ•´æ•°Â targetÂ ã€‚è¯·ä½ è¿”å›æ»¡è¶³å¦‚ä¸‹è§„åˆ™å¯ä»¥å¾—åˆ°çš„Â æœ€å¤§Â æ•´æ•°ï¼š
 *
 * ç»™å½“å‰ç»“æœæ·»åŠ ä¸€ä¸ªæ•°ä½ï¼ˆi + 1ï¼‰çš„æˆæœ¬ä¸ºÂ cost[i]Â ï¼ˆcostÂ æ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚
 * æ€»æˆæœ¬å¿…é¡»æ°å¥½ç­‰äºÂ targetÂ ã€‚
 * æ·»åŠ çš„æ•°ä½ä¸­æ²¡æœ‰æ•°å­— 0 ã€‚
 * ç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¯·ä½ ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ã€‚
 *
 * å¦‚æœæŒ‰ç…§ä¸Šè¿°è¦æ±‚æ— æ³•å¾—åˆ°ä»»ä½•æ•´æ•°ï¼Œè¯·ä½ è¿”å› "0" ã€‚
 *
 * Â 
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 * è¾“å…¥ï¼šcost = [4,3,2,5,6,7,2,5,5], target = 9
 * è¾“å‡ºï¼š"7772"
 * è§£é‡Šï¼šæ·»åŠ æ•°ä½ '7' çš„æˆæœ¬ä¸º 2 ï¼Œæ·»åŠ æ•°ä½ '2' çš„æˆæœ¬ä¸º 3 ã€‚æ‰€ä»¥ "7772" çš„ä»£ä»·ä¸º 2*3+ 3*1 = 9 ã€‚ "977" ä¹Ÿæ˜¯æ»¡è¶³è¦æ±‚çš„æ•°å­—ï¼Œä½† "7772" æ˜¯è¾ƒå¤§çš„æ•°å­—ã€‚
 *  æ•°å­—     æˆæœ¬
 *   1  ->   4
 *   2  ->   3
 *   3  ->   2
 *   4  ->   5
 *   5  ->   6
 *   6  ->   7
 *   7  ->   2
 *   8  ->   5
 *   9  ->   5
 * ç¤ºä¾‹ 2ï¼š
 *
 * è¾“å…¥ï¼šcost = [7,6,5,5,5,6,8,7,8], target = 12
 * è¾“å‡ºï¼š"85"
 * è§£é‡Šï¼šæ·»åŠ æ•°ä½ '8' çš„æˆæœ¬æ˜¯ 7 ï¼Œæ·»åŠ æ•°ä½ '5' çš„æˆæœ¬æ˜¯ 5 ã€‚"85" çš„æˆæœ¬ä¸º 7 + 5 = 12 ã€‚
 * ç¤ºä¾‹ 3ï¼š
 *
 * è¾“å…¥ï¼šcost = [2,4,6,2,4,6,4,4,4], target = 5
 * è¾“å‡ºï¼š"0"
 * è§£é‡Šï¼šæ€»æˆæœ¬æ˜¯ target çš„æ¡ä»¶ä¸‹ï¼Œæ— æ³•ç”Ÿæˆä»»ä½•æ•´æ•°ã€‚
 * ç¤ºä¾‹ 4ï¼š
 *
 * è¾“å…¥ï¼šcost = [6,10,15,40,40,40,40,40,40], target = 47
 * è¾“å‡ºï¼š"32211"
 * Â 
 *
 * æç¤ºï¼š
 *
 * cost.length == 9
 * 1 <= cost[i] <= 5000
 * 1 <= target <= 5000
 *
 * @author chengzhy
 * @date 2022/4/13 11:24
 */
public class P1449_FormLargestIntegerWithDigitsThatAddUpToTarget {

    public String largestNumber(int[] cost, int target) {
        // dp[i][j]æ•°ç»„è¡¨ç¤ºä»å‰iä¸ªæ•°å­—ä¸­ä»»å–ï¼Œæ€»æˆæœ¬æ°å¥½ä¸ºjçš„æœ€å¤§æ•´æ•°(æ³¨æ„è¿™é‡Œçš„æ°å¥½)
        String[][] dp = new String[10][target + 1];
        for (int i = 0; i < 10; i++) {
            dp[i][0] = "";
        }
        for (int i = 1; i <= target; i++) {
            // "#"è¡¨ç¤ºä»å‰iä¸ªæ•°å­—ä¸­ä»»å–æ€»æˆæœ¬ä¸ç­‰äºtargetçš„æƒ…å†µã€‚
            dp[0][i] = "#";
        }
        // å…ˆéå†ç‰©å“ï¼Œç›´æ¥å°†æ•°åŠ åˆ°å­—ç¬¦ä¸²çš„å¼€å¤´å³å¯
        for (int i = 1; i <= 9; i++) {
            // å†éå†èƒŒåŒ…
            for (int j = 1; j <= target; j++) {
                if (j < cost[i - 1]) {
                    // èƒŒåŒ…å®¹é‡å°äºå½“å‰ç‰©å“ï¼Œåˆ™ä¸èƒ½æ”¾å½“å‰ç‰©å“
                    dp[i][j] = dp[i - 1][j];
                } else {
                    if (dp[i][j - cost[i - 1]].equals("#")) {
                        // è¡¨ç¤ºèƒ½æ”¾å½“å‰ç‰©å“ï¼Œä½†æ˜¯ç”±äºé¢˜ç›®è¯´æ€»æˆæœ¬è¦æ°å¥½ç­‰äºjï¼Œè€ŒèƒŒåŒ…å®¹é‡ä¸ºj - cost[i - 1]æ—¶æ²¡æœ‰æ»¡è¶³æ°å¥½ç­‰äº
                        dp[i][j] = dp[i - 1][j];
                    } else {
                        dp[i][j] = getMax(dp[i - 1][j], i + dp[i][j - cost[i - 1]]);
                    }
                }
            }
        }
        return dp[9][target].equals("#") ? "0" : dp[9][target];
        // äºŒç»´dpæ•°ç»„ä¼˜åŒ–æˆä¸€ç»´dpæ•°ç»„
        /*String[] dp = new String[target + 1];
        dp[0] = "";
        for (int i = 1; i <= target; i++) {
            dp[i] = "#";
        }
        // å…ˆéå†ç‰©å“ï¼Œç›´æ¥å°†æ•°åŠ åˆ°å­—ç¬¦ä¸²çš„å¼€å¤´å³å¯
        for (int i = 1; i <= 9; i++) {
            // å†éå†èƒŒåŒ…
            for (int j = cost[i - 1]; j <= target; j++) {
                if (!dp[j - cost[i - 1]].equals("#")) {
                    dp[j] = getMax(dp[j], i + dp[j - cost[i - 1]]);
                }
            }
        }
        return dp[target].equals("#") ? "0" : dp[target];*/
        // å®˜æ–¹é¢˜è§£çš„dp[]æ•°ç»„å«ä¹‰æ˜¯ä½¿ç”¨å‰iä¸ªæ•°ä½ä¸”èŠ±è´¹æ€»æˆæœ¬æ°å¥½ä¸ºjæ—¶çš„æœ€å¤§ä½æ•°
        /*int[] dp = new int[target + 1];
        // è‹¥èŠ±è´¹æ€»æˆæœ¬æ— æ³•ä¸ºjï¼Œåˆ™è§„å®šå…¶ä¸ºInteger.MIN_VALUEã€‚
        Arrays.fill(dp, Integer.MIN_VALUE);
        dp[0] = 0;
        // å…ˆéå†ç‰©å“
        for (int c : cost) {
            // å†éå†èƒŒåŒ…
            for (int j = c; j <= target; j++) {
                dp[j] = Math.max(dp[j], dp[j - c] + 1);
            }
        }
        if (dp[target] < 0) {
            return "0";
        }
        StringBuilder sb = new StringBuilder();
        for (int i = 9, j = target; i >= 1; i--) {
            // åœ¨çŠ¶æ€å€’é€€æ—¶ï¼Œç›´æ¥æ ¹æ®dp[j]ä¸dp[j âˆ’ cost[i - 1]] + 1æ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­ï¼Œè‹¥äºŒè€…ç›¸ç­‰åˆ™è¯´æ˜æ˜¯ä»dp[j âˆ’ cost[i - 1]]è½¬ç§»è€Œæ¥ï¼Œå³é€‰æ‹©äº†ç¬¬iä¸ªæ•°ä½
            for (int c = cost[i - 1]; j >= c && dp[j] == dp[j - c] + 1; j -= c) {
                sb.append(i);
            }
        }
        return sb.toString();*/
    }

    private String getMax(String a, String b) {
        if (a.length() > b.length()) {
            return a;
        } else if (a.length() < b.length()) {
            return b;
        } else {
            return (a.compareTo(b) > 0) ? a : b;
        }
    }

}
