package breadth_first_search.medium;

import java.util.LinkedList;
import java.util.Queue;

/**
 * 01 çŸ©é˜µ
 * <a href="https://leetcode.cn/problems/01-matrix/">ğŸ”—</a>
 *
 * ç»™å®šä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„çŸ©é˜µ matÂ ï¼Œè¯·è¾“å‡ºä¸€ä¸ªå¤§å°ç›¸åŒçš„çŸ©é˜µï¼Œå…¶ä¸­æ¯ä¸€ä¸ªæ ¼å­æ˜¯ mat ä¸­å¯¹åº”ä½ç½®å…ƒç´ åˆ°æœ€è¿‘çš„ 0 çš„è·ç¦»ã€‚
 *
 * ä¸¤ä¸ªç›¸é‚»å…ƒç´ é—´çš„è·ç¦»ä¸º 1 ã€‚
 *
 * Â 
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 *
 *
 * è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[0,0,0]]
 * è¾“å‡ºï¼š[[0,0,0],[0,1,0],[0,0,0]]
 * ç¤ºä¾‹ 2ï¼š
 *
 *
 *
 * è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[1,1,1]]
 * è¾“å‡ºï¼š[[0,0,0],[0,1,0],[1,2,1]]
 * Â 
 *
 * æç¤ºï¼š
 *
 * m == mat.length
 * n == mat[i].length
 * 1 <= m, n <= 104
 * 1 <= m * n <= 104
 * mat[i][j] is either 0 or 1.
 * mat ä¸­è‡³å°‘æœ‰ä¸€ä¸ª 0Â 
 *
 * @author chengzhy
 * @date 2022/3/30 15:08
 */
public class P542_01Matrix {
    public static final int[][] DIRS = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};

    public int[][] updateMatrix(int[][] mat) {
        /**
         * å‚è€ƒå®˜æ–¹é¢˜è§£ï¼šå¤šæºæœ€çŸ­è·¯å¾„(BFS)
         * åŸå…ˆæ€è·¯å¯ä»¥ä»çŸ©é˜µä¸­çš„1å¼€å§‹å‘å››ä¸ªæ–¹å‘æœç´¢ï¼Œä½†æ˜¯æ­¤æ–¹æ³•ä¸æ˜¯æœ€ä¼˜è§£ï¼Œä¼šè¶…æ—¶
         * æ¢ä¸ªæ€è·¯ï¼šä»çŸ©é˜µä¸­çš„0å¼€å§‹å‘å››ä¸ªæ–¹å‘æœç´¢ï¼Œå°±èƒ½ä¿è¯æ¯ä¸€æ­¥åˆ°æœ€è¿‘çš„1çš„è·ç¦»ä¸€å®šæœ€çŸ­
         *
         * å¯¹äºTreeçš„BFS(å…¸å‹çš„å•æºBFS)ï¼šé¦–å…ˆæŠŠ root èŠ‚ç‚¹å…¥é˜Ÿï¼Œå†ä¸€å±‚ä¸€å±‚éå†å°±è¡Œäº†ã€‚
         * å¯¹äºå›¾çš„BFS(å¤šæºBFS)åšæ³•å…¶å®ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸Treeçš„BFSçš„åŒºåˆ«æ³¨æ„ä»¥ä¸‹ä¸¤æ¡ï¼š
         * 1.Treeåªæœ‰1ä¸ªrootï¼Œè€Œå›¾å¯ä»¥æœ‰å¤šä¸ªæºç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æŠŠå¤šä¸ªæºç‚¹éƒ½å…¥é˜Ÿï¼›
         * 2.Treeæ˜¯æœ‰å‘çš„å› æ­¤ä¸éœ€è¦æ ‡è¯†æ˜¯å¦è®¿é—®è¿‡ï¼Œè€Œå¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå¿…é¡»å¾—æ ‡å¿—æ˜¯å¦è®¿é—®è¿‡ï¼Œ
         * å¹¶ä¸”ä¸ºäº†é˜²æ­¢æŸä¸ªèŠ‚ç‚¹å¤šæ¬¡å…¥é˜Ÿï¼Œéœ€è¦åœ¨å…¶å…¥é˜Ÿä¹‹å‰å°±å°†å…¶è®¾ç½®æˆå·²è®¿é—®ï¼
         */
        int m = mat.length, n = mat[0].length;
        int[][] result = new int[m][n];
        boolean[][] visited = new boolean[m][n];
        Queue<int[]> queue = new LinkedList<>();
        // é¦–å…ˆå°†æ‰€æœ‰çš„0éƒ½å…¥é˜Ÿï¼Œå¹¶å°†0çš„ç‚¹è®¾ç½®ä¸ºè®¿é—®è¿‡
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (mat[i][j] == 0) {
                    queue.offer(new int[]{i, j});
                    visited[i][j] = true;
                }
            }
        }
        while (!queue.isEmpty()) {
            int[] temp = queue.poll();
            int i = temp[0], j = temp[1];
            // æ‰¾4ä¸ªæ–¹å‘ä¸Šçš„ç‚¹
            for (int k = 0; k < 4; k++) {
                int ni = i + DIRS[k][0], nj = j + DIRS[k][1];
                // åœ¨çŸ©é˜µèŒƒå›´å†…å¹¶ä¸”æœªè®¿é—®è¿‡
                if (ni >= 0 && ni < m && nj >= 0 && nj < n && !visited[ni][nj]) {
                    result[ni][nj] = result[i][j] + 1;
                    // å°†æ­¤èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œä»¥ä¾¿ä»è¿™ä¸ªèŠ‚ç‚¹ç»§ç»­æœç´¢
                    queue.offer(new int[]{ni, nj});
                    visited[ni][nj] = true;
                }
            }
        }
        return result;
    }

}
